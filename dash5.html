
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Car Driving Game</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background: radial-gradient(ellipse at center, #0f0c29 0%, #302b63 50%, #24243e 100%);
  font-family: 'Press Start 2P', monospace;
  overflow: hidden;
  color: #fff;
}
#gameLink {
  position: absolute;
  top: 10px;
  right: 10px;
  color: #f9d423;
  font-size: 14px;
  text-decoration: none;
  padding: 6px 12px;
  border: 2px solid #f9d423;
  border-radius: 6px;
  background-color: rgba(0,0,0,0.4);
  transition: all 0.3s ease-in-out;
}
#gameLink:hover {
  background: #f9d423;
  color: #000;
  box-shadow: 0 0 10px #f9d423;
}
.game-container {
  text-align: center;
  background: rgba(0, 0, 0, 0.85);
  padding: 15px 25px;
  border-radius: 15px;
  box-shadow: 0 0 30px #00ffe1;
}
canvas {
  border: 3px solid #00ffe1;
  background: #000;
}
#score, #speed {
  font-size: 18px;
  margin: 10px 0;
  color: #00ffe1;
  text-shadow: 0 0 6px #00ffe1;
}
#game-over {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(50, 50, 50, 0.9);
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 0 20px red;
  color: #fff;
  font-size: 20px;
  text-align: center;
}
.game-controls {
  margin-top: 12px;
}
button {
  padding: 10px 16px;
  font-size: 12px;
  font-family: inherit;
  color: #00ffe1;
  background-color: transparent;
  border: 2px solid #00ffe1;
  border-radius: 8px;
  margin: 0 5px;
  cursor: pointer;
  transition: all 0.3s ease-in-out;
}
button:hover {
  background-color: #00ffe1;
  color: #000;
  box-shadow: 0 0 10px #00ffe1;
}
</style>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
<a id="gameLink" href="index.html">Game Menu</a>
<div class="game-container">
  <div id="score">Score: 0</div>
  <div id="speed">Speed: 50%</div>
  <canvas id="gameCanvas" width="240" height="480"></canvas>
  <div class="game-controls">
    <button id="restart-game-button">Restart Game</button>
    <button id="faster-button">Faster</button>
    <button id="slower-button">Slower</button>
  </div>
  <div id="game-over">
    Game Over!<br>Score: <span id="final-score">0</span><br>
    <button id="restart-button">Restart</button>
  </div>
</div>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreDisplay = document.getElementById('score');
const speedDisplay = document.getElementById('speed');
const gameOverDisplay = document.getElementById('game-over');
const finalScoreDisplay = document.getElementById('final-score');
const restartButton = document.getElementById('restart-button');
const restartGameButton = document.getElementById('restart-game-button');
const fasterButton = document.getElementById('faster-button');
const slowerButton = document.getElementById('slower-button');

const LANE_WIDTH = 80;
const LANES = 3;
const CAR_WIDTH = 40;
const CAR_HEIGHT = 60;
const ROAD_WIDTH = LANE_WIDTH * LANES;
const ROAD_X = (canvas.width - ROAD_WIDTH) / 2;

let playerLane = 1;
let enemies = [];
let score = 0;
let gameOver = false;
let gameSpeed = 1;
let lastTime = 0;
let lastEnemySpawn = 0;
let roadOffset = 0;

function updateSpeedDisplay() {
  const speedPercentage = ((gameSpeed - 0.5) / (2 - 0.5)) * 100;
  speedDisplay.textContent = `Speed: ${Math.round(speedPercentage)}%`;
}

function resetGame() {
  playerLane = 1;
  enemies = [];
  score = 0;
  gameSpeed = 1;
  gameOver = false;
  scoreDisplay.textContent = `Score: ${score}`;
  updateSpeedDisplay();
  gameOverDisplay.style.display = 'none';
  lastEnemySpawn = performance.now();
  roadOffset = 0;
  lastTime = performance.now();
  requestAnimationFrame(update);
}

function makeFaster() {
  gameSpeed = Math.min(2, gameSpeed + 0.1);
  updateSpeedDisplay();
}
function makeSlower() {
  gameSpeed = Math.max(0.5, gameSpeed - 0.1);
  updateSpeedDisplay();
}

function spawnEnemy() {
  const lane = Math.floor(Math.random() * LANES);
  enemies.push({
    lane: lane,
    y: -CAR_HEIGHT,
    color: `hsl(${Math.random() * 360}, 70%, 50%)`
  });
}

function checkCollision() {
  const playerX = ROAD_X + playerLane * LANE_WIDTH + LANE_WIDTH / 2 - CAR_WIDTH / 2;
  const playerY = canvas.height - CAR_HEIGHT - 20;
  for (const enemy of enemies) {
    const enemyX = ROAD_X + enemy.lane * LANE_WIDTH + LANE_WIDTH / 2 - CAR_WIDTH / 2;
    if (
      Math.abs(playerX - enemyX) < CAR_WIDTH &&
      Math.abs(playerY - enemy.y) < CAR_HEIGHT
    ) {
      return true;
    }
  }
  return false;
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = '#555';
  ctx.fillRect(ROAD_X, 0, ROAD_WIDTH, canvas.height);

  ctx.strokeStyle = '#fff';
  ctx.lineWidth = 4;
  ctx.setLineDash([20, 20]);
  for (let i = 1; i < LANES; i++) {
    ctx.beginPath();
    ctx.moveTo(ROAD_X + i * LANE_WIDTH, 0);
    ctx.lineTo(ROAD_X + i * LANE_WIDTH, canvas.height);
    ctx.stroke();
  }
  ctx.setLineDash([]);

  const playerX = ROAD_X + playerLane * LANE_WIDTH + LANE_WIDTH / 2 - CAR_WIDTH / 2;
  const playerY = canvas.height - CAR_HEIGHT - 20;
  ctx.fillStyle = '#00ddeb';
  ctx.fillRect(playerX, playerY, CAR_WIDTH, CAR_HEIGHT);

  for (const enemy of enemies) {
    const enemyX = ROAD_X + enemy.lane * LANE_WIDTH + LANE_WIDTH / 2 - CAR_WIDTH / 2;
    ctx.fillStyle = enemy.color;
    ctx.fillRect(enemyX, enemy.y, CAR_WIDTH, CAR_HEIGHT);
  }
}

function update(time) {
  if (gameOver) {
    gameOverDisplay.style.display = 'block';
    finalScoreDisplay.textContent = score;
    return;
  }

  const deltaTime = (time - lastTime) / 1000;
  lastTime = time;

  roadOffset += deltaTime * gameSpeed * 100;
  if (roadOffset >= 40) roadOffset -= 40;
  ctx.setLineDash([20, 20]);
  ctx.lineDashOffset = -roadOffset;

  if (time - lastEnemySpawn > 2000 / gameSpeed) {
    spawnEnemy();
    lastEnemySpawn = time;
  }

  for (let i = enemies.length - 1; i >= 0; i--) {
    enemies[i].y += deltaTime * gameSpeed * 150;
    if (enemies[i].y > canvas.height) {
      enemies.splice(i, 1);
      score += 1;
      scoreDisplay.textContent = `Score: ${score}`;
    }
  }

  if (checkCollision()) {
    gameOver = true;
  }

  draw();
  requestAnimationFrame(update);
}

document.addEventListener('keydown', (e) => {
  if (gameOver) return;
  e.preventDefault();
  if (e.code === 'ArrowLeft' && playerLane > 0) playerLane--;
  if (e.code === 'ArrowRight' && playerLane < LANES - 1) playerLane++;
  draw();
});

restartButton.addEventListener('click', resetGame);
restartGameButton.addEventListener('click', resetGame);
fasterButton.addEventListener('click', makeFaster);
slowerButton.addEventListener('click', makeSlower);

resetGame();
</script>
</body>
</html>
